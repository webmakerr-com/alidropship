(()=>{function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=document.createElement("div");a.classList.add("tt_message"),a.innerHTML=e,t&&a.classList.add("error_red"),document.body.append(a),a.style.display="block",setTimeout((function(){a.style.display="none",a.replaceWith("")}),5e3)}jQuery((function(e){e(document).ready((function(){e(".modalcont").click((function(t){e(t.target).closest(".modalup").length||e(".modalcont").hide()})),e(".close_modal_cross").click((function(t){e(this).parents(".modalcont").hide()})),e(".close_modal").click((function(t){e(this).parents(".modalcont").hide()})),e(".change-link-button").on("click",(function(){return e(".modal-"+e(this).attr("id")).fadeIn(500),!1}))}))})),jQuery((function(t){(function(){var a={country:"",regionList:!1},n=(window.location.href.split("#"),{email:"",password:""});function o(){a.regionList=!1,t.ajax({url:alidAjax.ajaxurl,type:"POST",dataType:"json",async:!0,data:{action:"ads_rg_list",country:a.country},success:function(e){a.regionList=!t.isArray(e)&&e,a.regionList?function(){if(1==t("#js-account-stateSelect").length){var e="",n=(s=t("#js-account-stateSelect")).prop("id")+"-text";for(var o in t("#"+n).attr("disabled","disabled").hide(),s.removeAttr("disabled"),s.show(),1==s.parents(".bootstrap-select").length&&s.parents(".bootstrap-select").show(),a.regionList)e+='<option value="'+o+'">'+a.regionList[o]+"</option>";s.html(e),t('#js-account-stateSelect option[value="'+s.data("state-value")+'"]').attr("selected","selected"),s.parent().hasClass("bootstrap-select")&&s.selectpicker("refresh")}else{var s;for(var o in e="",n=(s=t("#js-account-dav-stateSelect")).prop("id")+"-text",t("#"+n).attr("disabeld","disabled").hide(),s.removeAttr("disabled"),s.show(),a.regionList)e+='<option value="'+o+'">'+a.regionList[o]+"</option>";s.html(e),t('#js-account-dav-stateSelect option[value="'+s.data("state-value")+'"]').attr("selected","selected")}}():function(){var e;1==t("#js-account-stateSelect").length?((e=t("#js-account-stateSelect")).attr("disabled","disabled").parents(".bootstrap-select").hide(),0==e.parents(".bootstrap-select").length&&e.hide()):(e=t("#js-account-dav-stateSelect")).attr("disabled","disabled").hide();if(e.html(""),!a.regionList){var n=e.prop("id")+"-text",o=e.data("state-value");t("#"+n).removeAttr("disabled").val(o).show()}}()}})}function s(){a.country=t('[name="account-country"] option:selected').val(),o()}function i(e){t(".panel").hide(),t("#saveAccountForm").parents(".form-group").hide();var a=t(".modal-container-"+e).find(".panel");""==n[e]&&(n[e]=a.html()),t(".modal-container-"+e).remove(),t('<div class="panel panel-default no-border-radius">'+n[e]+"</div>").appendTo("#account-details-form")}function r(){t(".panel").show(),t("#saveAccountForm").parents(".form-group").show()}function c(a){var n=t("#"+a).serializeArray();"accountForm"==a&&(t.each(t("#shippingAddress").serializeArray(),(function(e,t){n.push(t)})),n.push({name:"email",value:t("#current-email").html().trim()}),n.push({name:"action",value:"ads_account_save"})),"passwordForm"==a&&(n.push({name:"action",value:"ads_password_save"}),n.push({name:"email",value:t("#current-email").html().trim()})),"chageEmailForm"==a&&n.push({name:"action",value:"ads_email_save"}),t.ajax({url:alidAjax.ajaxurl,type:"POST",dataType:"json",async:!0,data:n,success:function(n){!function(t,a){a?e(t):e(t,1)}(n.message,n.result),t.each(t(".has-error"),(function(e,a){t(a).removeClass("has-error"),t(a).find(".help-block").remove()})),0==n.result?t.each(n.errors,(function(e,a){if("state"==a.field)var n=t("#shippingAddress").find('[name="state"]').parents(".form-group");else n=t("#"+a.field).parents(".form-group");n.addClass("has-error"),n.append('<span class="help-block">'+a.message+"</span>")})):(t("#"+a).parents(".modalcont").hide(),r()),void 0!==n.username&&t(".account-details-content").find(".user-email").html(n.username)}})}return{init:function(){var e;s(),t("#chageEmail").on("click",(function(e){e.preventDefault(),e.stopPropagation(),showDialog("email")})),t(".mobile-change-email").on("click",(function(e){e.preventDefault(),e.stopPropagation(),i("email")})),t(".mobile-change-password").on("click",(function(e){e.preventDefault(),e.stopPropagation(),i("password")})),t("#changePassword").on("click",(function(e){e.preventDefault(),e.stopPropagation(),showDialog("password")})),t(".cancel-btn-modal-panel").on("click",(function(){t(this).parents(".panel-modal-container").fadeOut("fast",(function(){t(this).remove()})),t(".modal-backdrop").fadeOut("fast",(function(){t(this).remove()})),t(this).parents(".panel").remove(),r()})),t(".close-btn-modal-panel").on("click",(function(){t(this).parents(".panel-modal-container").fadeOut("fast",(function(){t(this).remove()})),t(".modal-backdrop").fadeOut("fast",(function(){t(this).remove()}))})),(e=t("#shippingAddress").find('[name="phone-number"]')).on("input",(function(t){t.preventDefault(),t.stopPropagation();var a=e.val();/^\d+$/.test(a)||(this.value=this.value.replace(/[^0-9]/g,""))})),t('[name="account-country"]').on("change",(function(){t('[name="state"]').val("").data("state-value",""),s()})),t("#saveAccountForm").on("click",(function(e){e.preventDefault(),c("accountForm")})),t("#savePasswordForm").on("click",(function(e){e.preventDefault(),c("passwordForm")})),t("#changeEmailForm").on("click",(function(e){e.preventDefault(),c("chageEmailForm")}))}}})().init()}))})();