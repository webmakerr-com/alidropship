(function(a){var s=null,t=null,c={active:!1,categories:[],products:[],count:0,countShow:!1,q:""};function e(){if(c.active?(a(".ads-search-product").show(),a("body").addClass("ads-search-product--open")):(a(".ads-search-product").hide(),a("body").removeClass("ads-search-product--open")),c.active){var s="",t="Categories",e="Top matching products",i="View all";if(window.ads_search_trans&&(t=ads_search_trans.categories,e=ads_search_trans.top_matching_products,i=ads_search_trans.view_all),s+='<div class="wrap-search-product">',c.categories.length){for(var r in s+='<div class="categories"><div class="head">'+t+'</div><div class="list">',c.categories)s+='<div class=""><a href="'+c.categories[r].url+'"><div class="title">'+c.categories[r].title+"</div></a></div>";s+="</div></div>"}if(c.products.length){for(var o in s+='<div class="products"><div class="head"><a href="/?s='+c.q+'">'+e+'</a></div><div class="list">',c.products)s+='<a href="'+c.products[o].url+'"><div class="item"><div class="box-img"><img src="'+c.products[o].img+'" alt=""></div><div class="box-title"><div class="title">'+c.products[o].title+'</div><div class="price">'+c.products[o].price+"</div></div></div></a>";s+="</div></div>"}c.countShow&&(s+='<div class="view-all"><a href="/?s='+c.q+'">'+i+"<span>"+c.count+"</span></a></div>"),s+="</div>",a(".ads-search-product").html(s)}}function i(){a(".js-autocomplete-search").on("keyup",(function(){clearTimeout(t);var s=a(this).val();if(!(s.length<2)){var i=s.replace("‘","'");i=i.replace("’","'"),a(".js-autocomplete-search").val(i),t=setTimeout((function(){c.active=!0,function(s){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";c.q=s,a.ajax({url:alidAjax.ajaxurl,type:"POST",dataType:"json",async:!0,data:{action:"ads_search_product",q:s,size:t},success:function(a){c.products=a.products,c.categories=a.categories,c.count=a.count,c.countShow=a.countShow,e()}})}(i,a(".js-autocomplete-search").attr("data-size"))}),300)}})),a(document).on("click",(function(s){a(s).closest(".ads-search-product").length||(c.active=!1,e())}))}return{start:function(){if(!s&&(s=this,a(".js-autocomplete-search").length))return a(".js-autocomplete-search").parent().append('<div class="ads-search-product" style="display: none"><div>'),i(),this}}})(jQuery).start();