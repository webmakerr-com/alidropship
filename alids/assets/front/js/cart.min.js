!function(a){"use strict";var t,r,i,c,e,n,s,o,d,u;window.adsCart=(r=!1,i=!1,c=null,e={cart:{}},n=function(t){t&&(i=!0,e.cart=t,window.ADS.Dispatcher.trigger("cart:update",{cart:t}),a("body").trigger({type:"cart:update",cart:t}))},s=function(t,r){t&&(e.cart=t,window.ADS.Dispatcher.trigger("cart:change",{cart:t,order_id:r}),a("body").trigger({type:"cart:change",cart:t,order_id:r}))},o=function(){a("html").addClass("cart-pull-page")},d=function(){r||(r=!0,a("#modalCart").remove(),a(document).on("click",".js-cart-info, .cart a:not(.login-button)",(function(t){t.preventDefault(),a("#cart-sidebar").is(".no-cart-side")?a("#cart-sidebar").is(".enable-cart-page")?document.location.href="/shopping-cart":document.location.href="/cart":o()})),a("#cart-sidebar").is(".no-cart-side")&&(a(document).on("click",".view_cart",(function(a){document.location.href="/shopping-cart"})),a('[data-singleProduct="addCart"], .js-addToCart').on("click",(function(t){a(".outofstock").length||(a("#cart-message").html('"'+a("h1").html()+'" '+a("#cart-message").attr("data-success")),a("#cart-message").fadeIn(500),setTimeout((function(){a("#cart-message").fadeOut(500)}),5e3))}))),a(document).on("click","a.cart-close-btn,#cart-sidebar-overlay",(function(t){t.preventDefault(),a("html").removeClass("cart-pull-page")})),a(document).on("click","a.cart-item-remove",(function(){var r=a(this).closest(".cart-item-flex");r.addClass("cart-loader"),t.remove(r.attr("data-order_id"))})),a(document).on("click",".cart-numb-plus",(function(){var t=a(this).parent(".cart-quantity").find('[name="cart-quantity"]'),r=parseInt(t.val());r+=1,t.val(r).trigger("change")})),a(document).on("click",".cart-numb-minus",(function(){var t=a(this).parent(".cart-quantity").find('[name="cart-quantity"]'),r=parseInt(t.val());(r-=1)<=0&&(r=1),t.val(r).trigger("change")})),a(document).on("change",'.cart-quantity [name="cart-quantity"]',(function(){var r=a(this),i=a(this).closest(".cart-item-flex");clearTimeout(c),c=setTimeout((function(){t.newQuantity(i.attr("data-order_id"),r.val())}),300)})))},u=function(t){var r=a("#cart-sidebar"),i=a(".sc_cont");t.items=t.items.reverse();var c=t.items,e="",n=a(".cart-body").attr("data-remove");for(var s in n||(n="Remove"),c){var o=c[s].order_id;e+='<div class="cart-item-flex" data-order_id="'+o+'"> <div class="cart-item-thumb"> <img src="'+c[s].thumb+'"> <a href="javascript:;" data-order_id="'+o+'" class="cart-item-remove">'+n+'</a> </div> <div class="cart-item-flex-box cart-item-title"> <h3><a href="'+c[s].link+'" target="_blank">'+c[s].title+'</a></h3><span class="item-variations">'+c[s].vars+'</span>  <div class="cart-form-box"> <div class="cart-quantity"> <a href="javascript:;" data-order_id="'+o+'" class="cart-numb cart-numb-minus">&minus;</a> <a href="javascript:;" data-order_id="'+o+'" class="cart-numb cart-numb-plus">&plus;</a> <input type="number" min="1" name="cart-quantity" autocomplete="off" value="'+c[s].quantity+'"></div> <div class="cart-item-price">'+c[s].total_salePrice+"</div> </div> </div> </div>"}a(r).find(".cart-body").html(e);var d=t.hasOwnProperty("cur_salePriceNotShipping")?t.cur_salePriceNotShipping:t.cur_salePrice;if(a(r).find(".cart-footer .item-price").text(d),document.querySelector(".sc_cont")){a(i).find(".item-price").text(d);var u="";for(var l in c)u+='<div class="sc_item cart-item-flex" data-order_id="'+c[l].order_id+'"><div class="sc_img"><div class="cart-item-thumb"><img src="'+c[l].thumb+'"><a href="javascript:;" class="cart-item-remove">Remove</a></div></div><div class="sc_name"><a href="'+c[l].link+'" target="_blank">'+c[l].title+'</a><div class="item-variations">'+c[l].vars+'</div></div><div class="sc_quant cart-form-box"><div class="cart-quantity"><span class="cart-numb cart-numb-minus">&minus;</span><span class="cart-numb cart-numb-plus">&plus;</span><input type="number" min="1" name="cart-quantity" autocomplete="off" value="'+c[l].quantity+'"></div></div><div class="sc_price"><div class="cart-item-price">'+c[l].total_salePrice+"</div></div></div>";a(i).find(".sc_items").html(u)}},{init:function(r){(t=this).$discount='[name="discount"]';var i=a("body");window.ADS.Dispatcher.trigger("cart:init"),i.trigger({type:"cart:init"}),t.load(),function(){var t=a("body");t.on("cart:update",(function(a){jQuery("#cart-sidebar").length&&(d(),u(a.cart))})),t.on("cart:add",(function(t){jQuery("#cart-sidebar").length&&(d(),u(t.cart),a("#cart-sidebar").is(".no-cart-side")||o())})),t.on("cart:change",(function(a){jQuery("#cart-sidebar").length&&(d(),u(a.cart))})),jQuery("#cart-sidebar").length&&d()}();var c='[data-toggle="popover"]';a(c).length&&a(c).popover(),a(window).on("click touchstart",(function(t){a(c).each((function(){a(this).is(t.target)||0!==a(this).has(t.target).length||0!==a(".popover").has(t.target).length||a(this).popover("hide")}))}))},cartGetStatus:function(){return i},newQuantity:function(t,r){a.ajax({url:alidAjax.ajaxurl,type:"POST",async:!0,data:{discount:adsCart.getDiscount(),action:"ads_actions_basket",ads_actions:"set_quantity",order_id:t,quantity:r},success:function(a){s(a,t)}})},newShipping:function(t,r){a.ajax({url:alidAjax.ajaxurl,type:"POST",async:!0,data:{discount:adsCart.getDiscount(),action:"ads_actions_basket",ads_actions:"set_shipping",order_id:t,shipping:r},success:function(r){s(r,t);var i=r;i&&(window.ADS.Dispatcher.trigger("cart:shipping",{cart:i,info:{order_id:i.info.change_order}}),a("body").trigger({type:"cart:shipping",cart:i,info:{order_id:i.info.change_order}}))}})},newShippingForOrdersGroup:function(t){var r=[],i="";for(var c in t)t.hasOwnProperty(c)&&(r.push(c),i=t[c]);a.ajax({url:alidAjax.ajaxurl,type:"POST",async:!0,data:{discount:adsCart.getDiscount(),action:"ads_actions_basket",ads_actions:"set_shipping_to_orders_group",orders_ids:r,shipping:i},success:function(t){s(t,r[r.length-1]);var i=t;i&&(window.ADS.Dispatcher.trigger("cart:shipping",{cart:i,info:{order_id:i.info.change_order}}),a("body").trigger({type:"cart:shipping",cart:i,info:{order_id:i.info.change_order}}))}})},add:function(t){var r=a.extend({id:"",quantity:1,variation:"",title:""},t);r.action="ads_actions_basket",r.ads_actions="add",r.discount=adsCart.getDiscount(),a.ajax({url:alidAjax.ajaxurl,type:"POST",async:!0,data:r,success:function(r){!function(t,r){t&&(e.cart=t,window.ADS.Dispatcher.trigger("cart:add",{cart:t,order:r,info:{order_id:t.info.change_order},obj:t.info}),a("body").trigger({type:"cart:add",cart:t,order:r,info:{order_id:t.info.change_order},obj:t.info}))}(r,t)}})},remove:function(t){a.ajax({url:alidAjax.ajaxurl,type:"POST",async:!0,data:{discount:adsCart.getDiscount(),action:"ads_actions_basket",ads_actions:"remove",order_id:t},success:function(r){r&&(window.ADS.Dispatcher.trigger("cart:remove",{cart:e.cart,order_id:t}),a('.sc_cont .cart-item-flex[data-order_id="'+t+'"]').replaceWith("")),n(r)}})},load:function(){return new Promise((function(t,r){a.ajax({url:alidAjax.ajaxurl,type:"POST",async:!0,data:{discount:adsCart.getDiscount(),action:"ads_actions_basket",ads_actions:"get_orders"},success:function(a){return n(a),t(a)}})}))},convPrice:function(t,r){a.ajax({url:alidAjax.ajaxurl,type:"POST",async:!0,data:{action:"ads_conv_price",price:t[0],currency:t[1]},success:r})},convPriceTotal:function(t,r){a.ajax({url:alidAjax.ajaxurl,type:"POST",async:!0,data:{action:"ads_conv_price_total",price:t.price,currency:t.currency,price_shipping:t.price_shipping,currency_shipping:t.currency_shipping,quantity:t.quantity},success:r})},getDiscount:function(){var r=a(t.$discount);return r.length?r.val():""},cart:function(){return e.cart},setOrders:function(t,r){a.ajax({url:alidAjax.ajaxurl,type:"POST",async:!0,data:{discount:r,orders:t,action:"ads_actions_basket",ads_actions:"set_orders"},success:n})},setShipping:function(t,r){a.ajax({url:alidAjax.ajaxurl,type:"POST",async:!0,data:{discount:r,shipping:t,action:"ads_actions_basket",ads_actions:"set_shipping_cart"},success:n})}});var l=setInterval((function(){"undefined"!=typeof alidAjax&&(clearInterval(l),window.adsCart.init())}),300)}(jQuery);