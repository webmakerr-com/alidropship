(()=>{function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=document.createElement("div");n.classList.add("tt_message"),n.innerHTML=e,i&&n.classList.add("error_red"),document.body.append(n),n.style.display="block",setTimeout((function(){n.style.display="none",n.replaceWith("")}),5e3)}jQuery((function(i){var n=new Array;i(".in-conditions-review").on("change",(function(e){var n=i(this).is(":checked");i(this).closest("form").find(".conditions-help").toggle(!n)})),i(".stars-container").rating(),i("#review-file-upload").fileupload({url:alidAjax.ajaxurl,dataType:"json",autoUpload:!1}).on("fileuploadadd",(function(e,a){var r=a.files[0].type.split("/");if("undefined"!=r[0]&&"image"!=r[0])return!1;var s=a.files[0].name.split(".");s[0]=i.trim(s[0]).substring(0,17)+"...",i('<p class="review_filenames" style="padding:10px 0px 0px 0px;">'+s.join("")+' <i style="cursor:pointer;" class="glyphicon glyphicon-remove-circle remove-review-image" data-imagename="'+a.files[0].name+'"></i>;</p>').appendTo(".list-file"),i.each(a.files,(function(e,i){n.push(a.files[e])})),i(".remove-review-image").on("click",(function(){var e=i(this).data("imagename");i(this).parent("p").remove(),i.each(n,(function(i,a){void 0!==a&&e==a.name&&n.splice(i,1)}))}))})),i("form.addReviewForm").submit((function(a){a.preventDefault(),a.stopPropagation();var r=i(this);if(!function(e){return!i(".conditions-review",e).length||!!i(".in-conditions-review",e).is(":checked")||(i(".conditions-help",e).show(),!1)}(r))return!1;n.length>0?i("#review-file-upload").fileupload("send",{files:n}).success((function(n,a,s){1==n.result&&(r.trigger("reset"),i(".stars .star").removeClass("fullStar")),e(n.message)})).error((function(i,n,a){e(i.responseText,1)})).complete((function(e,a,r){n=new Array,i(".review_filenames").remove()})):i.ajax({url:alidAjax.ajaxurl,type:"POST",data:r.serialize(),dataType:"json",success:function(a){1==a.result&&(n=new Array,r.trigger("reset"),i(".review_filenames").remove(),i(".stars .star").removeClass("fullStar")),e(a.message)},error:function(i){e(i.responseText,1)}})}))}))})();